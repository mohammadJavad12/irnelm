<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø³Øª Ø¬Ø¯ÛŒØ¯</title>
    <link rel="stylesheet" href="editor.css">
</head>
<body>
    <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
    <div id="sidebar">
        <ul>
            <li><a href="#">Ø®Ø§Ù†Ù‡</a></li>
            <li><a href="#">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a></li>
            <li><a href="#">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a></li>
        </ul>
    </div>
    <div class="container">
        <div class="title-container">
            <h1>Ø§ÛŒØ¬Ø§Ø¯ ÛŒÚ© Ù¾Ø³Øª Ø¬Ø¯ÛŒØ¯</h1>
            <p class="subtitle">Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¹Ù†ÙˆØ§Ù† Ùˆ Ù…Ø­ØªÙˆØ§ÛŒ Ù¾Ø³Øª Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</p>
        </div>
        <form id="postForm">
            <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù¾Ø³Øª" required>
            <div class="editor-container">
                <div class="editor-buttons">
                    <select id="fontFamily" onchange="changeFont()">
                        <option value="Vazir">ğŸ–‹ Vazir</option>
                        <option value="IRANSans">âœ’ IRANSans</option>
                        <option value="Roboto">ğŸ”¤ Roboto</option>
                    </select>
                    <select id="fontSize" onchange="changeFontSize()">
                        <option value="16px">ğŸ”  16px</option>
                        <option value="18px">ğŸ”  18px</option>
                        <option value="20px">ğŸ”  20px</option>
                        <option value="24px">ğŸ”  24px</option>
                        <option value="30px">ğŸ”  30px</option>
                    </select>
                    <button type="button" onclick="toggleBold()">ğŸ…± Bold</button>
                    <button type="button" onclick="toggleItalic()">ğ˜ Italic</button>
                    <button type="button" onclick="toggleUnderline()"> U Underline</button>
                    <button type="button" onclick="toggleDirection()">ğŸ”„ ØªØºÛŒÛŒØ± Ø¬Ù‡Øª</button>
                </div>
                <div class="editor" contenteditable="true" id="content" dir="rtl"></div>
            </div>
            <button type="submit">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¯Ø§Ù†Ù„ÙˆØ¯</button>
        </form>
    </div>

    <script>
        // Prevent form submission and trigger the download
        document.getElementById("postForm").addEventListener("submit", function(event) {
            event.preventDefault();  // Prevent default form submission
            const title = document.getElementById('title').value;
            const content = document.getElementById('content').innerHTML;
            const direction = document.getElementById('content').dir;
            
            // Call the download function
            downloadHTMLFile(title, content, direction);
        });
    
        function changeFont() {
            const font = document.getElementById('fontFamily').value;
            document.getElementById('content').style.fontFamily = font;
        }
    
        function changeFontSize() {
            const fontSize = document.getElementById('fontSize').value;
            document.getElementById('content').style.fontSize = fontSize;
        }
    
        function toggleBold() {
            document.execCommand('bold');
        }
    
        function toggleItalic() {
            document.execCommand('italic');
        }
    
        function toggleUnderline() {
            document.execCommand('underline');
        }
    
        function toggleDirection() {
            const editor = document.getElementById('content');
            editor.dir = editor.dir === 'rtl' ? 'ltr' : 'rtl';
        }
    
        function downloadHTMLFile(title, content, direction) {
            const fontFamily = document.getElementById('fontFamily').value;
    
            // Add the Google Fonts link for the selected font
            const fontLink = `
                <link href="https://fonts.googleapis.com/css2?family=Vazir&family=IRANSans&family=Roboto&display=swap" rel="stylesheet">
            `;
    
            // Create the HTML content with the font applied
            const htmlContent = `<!DOCTYPE html>
    <html lang="fa">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>${title}</title>
        ${fontLink}
        <link rel="stylesheet" href="styles.css">
    </head>
    <body dir="${direction}">
        <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
        <div id="sidebar">
            <ul>
                <li><a href="#">Ø®Ø§Ù†Ù‡</a></li>
                <li><a href="#">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</a></li>
                <li><a href="#">ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</a></li>
            </ul>
        </div>
        <div class="container">
            <h1 style="font-family: ${fontFamily};">${title}</h1>
            <div class="post" style="font-family: ${fontFamily};">${content}</div>
        </div>
    </body>
    </html>`;
    
            // Create a blob and download the file
            const blob = new Blob([htmlContent], { type: "text/html" });
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            link.download = title.replace(/\s+/g, "_") + ".html";
            link.click();
        }
    </script>
</body>
</html>
